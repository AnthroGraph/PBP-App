<div class="page" style="margin-left:50px; margin-right: 50px; margin-bottom: 50px">
<h4>You are currently viewing/editing Vertebral Pathologies Section: <strong>[[this.label]]</strong></h4>
<br>
[[>:PBP_Patho_Dataset_Section_Snippet_Header]]
[[>:PBP_Patho_AddPathologySectionNoROISpec_Template section_type=" Vertebral Pathologies"]]


<br> <hr>
<h4>Add Additional Information</h4>
<semantic-form
subject='[[this]]'
post-action='reload'
persistence='sparql'
id="additonal-info"
form-id="additonal-info"
browser-persistence='true'
fields='[

	 [[>:PBP_Patho_SectionFormsSwitch_Ankylosis_Template value_spec="phaleron-patho:DegreeOfBoneLippingValueSpecification" connected_iristring="DegreeOfOsteophyteFormation" connected_class="phaleron-patho:DegreeOfOsteophyteFormation" id="DegreeOfOsteophyteFormation" label="Degree Of Osteophyte Formation" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/LippingDegreeLabelSorting>" alternative_class_delete="phaleron-patho:DegreeOfSyndesmophyteFormation" ]],

	  [[>:PBP_Patho_SectionFormsSwitch_Ankylosis_Template value_spec="phaleron-patho:DegreeOfBoneLippingValueSpecification" connected_iristring="DegreeOfSyndesmophyteFormation" connected_class="phaleron-patho:DegreeOfSyndesmophyteFormation" id="DegreeOfSyndesmophyteFormation" label="Degree Of Syndesmophyte Formation" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/LippingDegreeLabelSorting>" alternative_class_delete="phaleron-patho:DegreeOfOsteophyteFormation"]],
	  
  [[>:PBP_Patho_SectionFormsSwitch_Template value_spec="standards-patho:PresenceOfFeatureValueSpecification" connected_iristring="PresenceOfSchmorlsNodes" connected_class="phaleron-patho:PresenceOfSchmorlsNodes" id="PresenceOfSchmorlsNodes" label="Presence Of Schmorls Nodes" sortingclass="<http://w3id.org/rdfbones/ext/standards-patho/PresenceOfFeatureLabelSorting>"  connected_class_delete="phaleron-patho:PresenceOfSchmorlsNodes,  phaleron-patho:SurfaceOfBodyOfVertebraAffectedBySchmorlsNodes"]],
    
     [[>:PBP_Patho_SectionFormsSwitch_Template value_spec="standards-patho:PresenceOfFeatureValueSpecification" connected_iristring="PresenceOfSpinaBifida" connected_class="phaleron-patho:PresenceOfSpinaBifida" id="PresenceOfSpinaBifida" label="Presence Of Spina Bifida" sortingclass="<http://w3id.org/rdfbones/ext/standards-patho/PresenceOfFeatureLabelSorting>"  connected_class_delete="phaleron-patho:PresenceOfSpinaBifida,  phaleron-patho:NumberOfSacralUnitsAffectedBySpinaBifida"]],

     [[>:PBP_Patho_SectionFormsSwitch_Template value_spec="standards-patho:PresenceOfFeatureValueSpecification" connected_iristring="PresenceOfSpondylolysis" connected_class="phaleron-patho:PresenceOfSpondylolysis" id="PresenceOfSpondylolysis" label="Presence Of Spondylolysis" sortingclass="<http://w3id.org/rdfbones/ext/standards-patho/PresenceOfFeatureLabelSorting>"  connected_class_delete="phaleron-patho:PresenceOfSpondylolysis,  phaleron-patho:DegreeOfSpondylolysis"]],

     [[>:PBP_Patho_SectionForms_Template maxOccurs="1" value_spec="phaleron-patho:ChangeInShapeOfBodyOfVertebraValueSpecification" connected_iristring="ChangeInShapeOfBodyOfVertebra" connected_class="phaleron-patho:ChangeInShapeOfBodyOfVertebra" id="ChangeInShapeOfBodyOfVertebra" label="Change In Shape Of Body Of Vertebra" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/ChangeInShapeOfBodyOfVertebraLabelSorting>"]]

  
  
]'

>
  <semantic-form-recover-notification></semantic-form-recover-notification>
  <semantic-form-select-input for='DegreeOfOsteophyteFormation'></semantic-form-select-input>
  <semantic-form-select-input for='DegreeOfSyndesmophyteFormation'></semantic-form-select-input>

<semantic-form-select-input for='PresenceOfSchmorlsNodes'></semantic-form-select-input>
<semantic-form-select-input for='PresenceOfSpinaBifida'></semantic-form-select-input>
<semantic-form-select-input for='ChangeInShapeOfBodyOfVertebra'></semantic-form-select-input>


      <div style="color:red"><strong>INFO:</strong> After saving this sub-form, new entry fields may appear below - depending on the selected input.</div>

<button name="submit" class="btn btn-primary"><strong>Save</strong></button>
<button name="reset" class="btn btn-secondary">Reset</button>
    [[>:RDFBONES_FormSuccessFeedbackTemplateSnippet ufb-id="show-after-additonalinfo-update" ufbTemplate="additional-Template" ufbname="Additional Information"]]
</semantic-form>
 [[>:RDFBONES_FormSuccessFeedbackEventSnippet event-source="additonal-info" event-target="show-after-additonalinfo-update"]]

<br><hr>

[[>:PBP_Patho_Single_Switch_Template maxOccurs="1" type="phaleron-patho:DegreeOfOsteophyteFormation" value_check="http://w3id.org/rdfbones/ext/standards-patho/AbsenceOfFeature" value_spec="phaleron-patho:SuperiorInferiorValueSpecification" connected_iristring="SurfaceOfBodyOfVertebraAffectedByOsteophytes" connected_class="phaleron-patho:SurfaceOfBodyOfVertebraAffectedByOsteophytes" id="SurfaceOfBodyOfVertebraAffectedByOsteophytes" label="Surface Of Body Of Vertebra Affected By Osteophytes" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/SuperiorInferiorLabelSorting>"]]

[[>:PBP_Patho_Single_Switch_Template maxOccurs="1" type="phaleron-patho:PresenceOfSchmorlsNodes" value_check="http://w3id.org/rdfbones/ext/standards-patho/AbsenceOfFeature" value_spec="phaleron-patho:SuperiorInferiorValueSpecification" connected_iristring="SurfaceOfBodyOfVertebraAffectedBySchmorlsNodes" connected_class="phaleron-patho:SurfaceOfBodyOfVertebraAffectedBySchmorlsNodes" id="SurfaceOfBodyOfVertebraAffectedBySchmorlsNodes" label="Surface Of Body Of Vertebra Affected By Schmorls Nodes" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/SuperiorInferiorLabelSorting>"]]

  [[>:PBP_Patho_Single_Switch_Count_Template type="phaleron-patho:PresenceOfSpinaBifida" value_check="http://w3id.org/rdfbones/ext/standards-patho/AbsenceOfFeature" value_spec="standards-si:CountValueSpecification" connected_iristring="NumberOfSacralUnitsAffectedBySpinaBifida" connected_class="phaleron-patho:NumberOfSacralUnitsAffectedBySpinaBifida" id="NumberOfSacralUnitsAffectedBySpinaBifida" label="Number Of Sacral Units Affected By Spina Bifida" sortingclass="<http://w3id.org/rdfbones/ext/phaleron-patho/SuperiorInferiorLabelSorting>"]]


    <!--Ankylosis ROI selection -->
     <semantic-query query="PREFIX obo: <http://purl.obolibrary.org/obo/>
                    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  
                    PREFIX phaleron-patho:<http://w3id.org/rdfbones/ext/phaleron-patho/>
                    PREFIX standards-patho:<http://w3id.org/rdfbones/ext/standards-patho/>                    
                    SELECT(count(distinct ?presence) as ?value) WHERE {
                          ?? obo:BFO_0000051 ?presence .
                          ?presence a ?presenceclass .
			  FILTER (?presenceclass IN (phaleron-patho:DegreeOfOsteophyteFormation, phaleron-patho:SurfaceOfBodyOfVertebraAffectedByOsteophytes))
                          ?presence obo:OBI_0001938 ?ValueSpec .
                          ?ValueSpec obo:OBI_0000999 <http://w3id.org/rdfbones/ext/standards-patho/Ankylosis> .
			  
                          
                    }" template="{{> t}}">
       <template id="t">
	
   {{#ifCond bindings.0.value.value ">=" "1"}}
<semantic-form
post-action='event'
persistence='sparql'
browser-persistence='true'
  id="ROIselect"
  subject=[[this]]
  fields='[{
    "id": "roispec",
    "label": "Select ROI Affected by Ankylosis",
    "xsdDatatype": "xsd:anyURI",
    "maxOccurs": 2,
    "minOccurs": 0,
    "selectPattern": "
        PREFIX obo: <http://purl.obolibrary.org/obo/>
	PREFIX phaleron-patho:<http://w3id.org/rdfbones/ext/phaleron-patho/>
	PREFIX vivo: <http://vivoweb.org/ontology/core#>

	SELECT DISTINCT ?value WHERE {
	?? obo:BFO_0000051 ?ankylosisInstance.
	?ankylosisInstance a phaleron-patho:Ankylosis .
	?ankylosisInstance vivo:relates ?value .
	FILTER (NOT EXISTS {?? obo:IAO_0000136 ?value } )
}
",

    "insertPattern": "
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
      PREFIX obo: <http://purl.obolibrary.org/obo/>
      PREFIX vivo: <http://vivoweb.org/ontology/core#>
      PREFIX phaleron-patho:<http://w3id.org/rdfbones/ext/phaleron-patho/>
      PREFIX cidoc:<http://www.cidoc-crm.org/cidoc-crm/>
      
      INSERT {GRAPH ?mygraph {  
        ?? obo:BFO_0000051 ?ankylosisInstance.
	?ankylosisInstance a phaleron-patho:Ankylosis .
	?ankylosisInstance vivo:relates ?value.
	?ankylosisInstance vivo:relates ?ROIinstance.
               
       }} WHERE {GRAPH ?mygraph { ?? a ?o }
       BIND(URI(CONCAT(STR(?subject),\"-Ankylosis\")) AS ?ankylosisInstance ) 
       ?? obo:IAO_0000136 ?ROIinstance .
       ?ROIinstance a ?ROIclass .
       ?ROIclass rdfs:subClassOf*  <http://w3id.org/rdfbones/core#AnatomicalRegionOfInterest>  .
       }        
       
",

"valueSetPattern": "
        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
        PREFIX obo: <http://purl.obolibrary.org/obo/>
        PREFIX vivo: <http://vivoweb.org/ontology/core#>
        PREFIX phaleron-patho:<http://w3id.org/rdfbones/ext/phaleron-patho/>
        PREFIX cidoc:<http://www.cidoc-crm.org/cidoc-crm/>
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX owl: <http://www.w3.org/2002/07/owl#>

       SELECT DISTINCT $value ?label $ROI WHERE {          
        ?? obo:IAO_0000136 ?ROIinstance .
        ?ROIinstance a $ROIclass .
        ?ROIclass rdfs:subClassOf* <http://w3id.org/rdfbones/anthrograph/app/phaleron-app/AnatomicalROIGroup> .
        ?ROIclass rdfs:subClassOf ?myRS .
        ?myRS a owl:Restriction ;
              owl:onProperty ?myproperty ;
              owl:someValuesFrom ?restriction_values .
        ?restriction_values owl:intersectionOf ?whatelse .
        ?whatelse ?p ?value_class .
        ?value_class rdfs:subClassOf* <http://w3id.org/rdfbones/core#AnatomicalRegionOfInterest> .
        ?ppdataset obo:BFO_0000051 ?? .
        ?ppinvest  obo:OBI_0000299 ?ppdataset.
        ?ppinvest obo:OBI_0000293 ?mySkelSpecimen .
        ?mySI <http://semanticscience.org/resource/SIO_000563> ?mySkelSpecimen .
        ?mySI  obo:BFO_0000051 ?mysection.
        ?mysection obo:BFO_0000051 ?MD .
	?MD obo:IAO_0000136 ?value .
	?MD a <http://w3id.org/rdfbones/ext/standards-si/Representation4States> .
        ?value a $value_class .
	FILTER (NOT EXISTS {?? obo:IAO_0000136 ?value } )
        ?MD     obo:OBI_0001938 ?VS .
	?VS obo:OBI_0000999 ?MDV .
	Filter(?MDV NOT IN (<http://w3id.org/rdfbones/ext/standards-si/missing>) )
        ?whatelse rdf:rest ?rest .
        ?rest rdf:first ?desc.
        ?desc owl:hasValue ?index .
	?value_class rdfs:label ?label.
        } ORDER BY ?index "

,
		    
"deletePattern": "
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX obo: <http://purl.obolibrary.org/obo/>
    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
    PREFIX vivo: <http://vivoweb.org/ontology/core#>
    PREFIX phaleron-patho:<http://w3id.org/rdfbones/ext/phaleron-patho/>

    DELETE {?ankylosisInstance vivo:relates ?value.} WHERE {
    ?? obo:BFO_0000051 ?ankylosisInstance.
    ?ankylosisInstance a phaleron-patho:Ankylosis .
    ?ankylosisInstance vivo:relates ?value .} "


}]'>
 <semantic-form-recover-notification></semantic-form-recover-notification>
<semantic-form-select-input for='roispec'></semantic-form-select-input><button name="submit" class="btn btn-primary"><strong>Save</strong></button>
    <button name="reset" class="btn btn-secondary">Reset</button>
[[>:RDFBONES_FormSuccessFeedbackTemplateSnippet ufb-id="ROIselect-update" ufbTemplate="roi-Template" ufbname="ROI selection"]]
</semantic-form>
 [[>:RDFBONES_FormSuccessFeedbackEventSnippet event-source="ROIselect" event-target="ROIselect-update"]]
    
{{/ifCond}}
      

    </template>
  </semantic-query>

</div>
